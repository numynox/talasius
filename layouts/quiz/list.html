{{ define "main" }}

  <header>
    {{ if .Params.showBreadcrumbs | default (site.Params.list.showBreadcrumbs | default false) }}
      {{ partial "breadcrumbs.html" . }}
    {{ end }}
    <h1 class="mt-5 text-4xl font-extrabold text-neutral-900 dark:text-neutral">{{ .Title }}</h1>
  </header>

  {{/* Intro text */}}
  <section class="mt-8 prose dark:prose-invert max-w-prose">
    {{ .Content }}
  </section>

  {{/* Image grid - masonry layout */}}
  <section class="mt-12 quiz-masonry">
    {{ range .Pages }}
      {{ $page := . }}
      {{ with .Params.featureImage }}
        <a href="{{ $page.Permalink }}" class="quiz-image-item group block overflow-hidden rounded-lg shadow-md hover:shadow-xl transition-shadow mb-2">
          <img src="{{ . | relURL }}" alt="{{ $page.Title }}" class="nozoom w-full h-auto group-hover:scale-105 transition-transform duration-300">
          <div class="quiz-overlay" aria-hidden="true">
            <div class="quiz-overlay-solution">{{ $page.Params.solution | default $page.Title }}</div>
            <div class="quiz-overlay-attempts" data-attempt-one="{{ i18n "quiz.attempt_one" }}" data-attempts-many="{{ i18n "quiz.attempts_many" }}"></div>
          </div>
        </a>
      {{ end }}
    {{ end }}
  </section>

  <section class="mt-6 prose max-w-prose">
    <button id="quiz-export-button" data-prompt="{{ i18n "quiz.export_prompt_team" }}" class="mr-3 !rounded-md bg-primary-600 px-4 py-2 !text-neutral !no-underline hover:!bg-primary-500 dark:bg-primary-800 dark:hover:!bg-primary-700">
      {{ i18n "quiz.export_progress" }}
    </button>
    <button id="quiz-reset-button" data-confirm="{{ i18n "quiz.reset_confirm" }}" class="!rounded-md bg-neutral-800 px-4 py-2 !text-neutral !no-underline hover:!bg-neutral-700 dark:bg-neutral-600 dark:hover:!bg-neutral-500">
      {{ i18n "quiz.reset_progress" | default "Reset quiz progress" }}
    </button>
  </section>
  
  {{ $quiz := resources.Get "js/quiz.js" }}
  {{ if $quiz }}
    <script src="{{ $quiz.RelPermalink }}"></script>
  {{ end }}
{{ end }}